<script>
  var initialize_calendar;
  initialize_calendar = function() {
    var t;
    t = void 0;
    $.getJSON('<%= "/dashboard/trips/#{@trip.id}/events/get_date.json" %>', function(json) {
      t = json;
      $('#calendar').each(function(){
        var calendar = $(this);
        calendar.fullCalendar({
          locale: 'zh-tw',
          events: 'events.json',
          editable: true,
          scrollTime: '05:00:00',
          height: 950,
          defaultView: 'agendaDate',
          header: {
            left: 'prev,today,next',
            center: 'title',
            right: 'listWeek,agendaDate,month'
          },
          views: {
            agendaDate: {
              type: 'agenda',
              duration: {
                days: t.days
              }
            }
          },
          defaultDate: t.defaultDate
        });
      })
    });
  };
  $(document).ready(initialize_calendar)
  $(document).on('page:load', initialize_calendar);
</script>
